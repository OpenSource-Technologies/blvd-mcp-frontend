<!-- <div *ngFor="let m of messages">
    <strong>{{ m.role }}:</strong> {{ m.content }}
  </div>
  <input [(ngModel)]="userInput" placeholder="Type a message" />
  <button (click)="send()">Send</button> -->



  <!-- <div id="bot-container" class="chat-container">
    <div class="messages">
      <div *ngFor="let msg of chatMessages" [ngClass]="msg.sender">
        <span>{{ msg.text }}</span>
      </div>
    </div>
  
    <div class="input-area">
      <input [(ngModel)]="userInput" (keyup.enter)="sendMessage()" placeholder="Type your message..." />
      <button (click)="sendMessage()">Send</button>
    </div>
  </div> -->

<!----- third--->

  <!-- <div *ngIf="showBotChat" class="chat-area">
    <div class="messages">
      <div *ngFor="let msg of chatMessages" [ngClass]="msg.sender">
        <span>{{ msg.text }}</span>
      </div>
    </div>
  
    <div class="input-area">
      <input [(ngModel)]="userInput" (keyup.enter)="sendMessage()" placeholder="Type your message..." />
      <button (click)="sendMessage()">Send</button>
    </div>
  </div>
  
  <div *ngIf="showHumanChat" class="chat-area">
    <iframe
      id="tawkChatFrame"
      src="https://embed.tawk.to/61f6641a9bd1f31184da0b21/default"
      width="100%"
      height="100%"
      frameborder="0"
      style="border:none; min-height:400px;">
    </iframe>
  </div> -->


  <!----- fourth --->
  <!-- <div class="chat-window">
    <div class="messages">
      <div *ngFor="let msg of chatMessages" [ngClass]="msg.sender">
        {{ msg.text }}
      </div>
    </div>
  
    <div class="input-area">
      <input [(ngModel)]="userInput" placeholder="Type a message..." (keyup.enter)="sendMessage()" />
      <button (click)="sendMessage()">Send</button>
    </div>
  </div> -->


<!-- ðŸ’¬ Chat Toggle Button -->
<!-- <button class="open-chat-btn" (click)="toggleChat()">
  ðŸ’¬ Chat
</button> -->



<!-----basic design ------>
<div *ngIf="!showCheckoutIframe">
  <div>
    <h1 class="headText">BLVD ChatBot,</h1></div>
  <div class="main-chat-container">
    <div class="chat-container" >
      <div #messagesContainer class="messages">
        <div *ngFor="let msg of chatMessages" [ngClass]="msg.role">
          <img *ngIf="msg.role=='assistant' && msg?.button?.type!='SHOW_PAY_BUTTON'" class="avatar" src="assets/user.svg" alt="Agent" />
          <!-- <div class="message-text">{{ msg.content }}</div> -->
          <div *ngIf="msg?.button?.type!='SHOW_PAY_BUTTON'" class="message-text" [innerHTML]="getContent(msg.content)"></div>

          <div class="text-center mt-3" *ngIf="msg?.button?.type === 'SHOW_PAY_BUTTON'">
            <!-- <a href="#" (click)="goToCheckout(msg?.button?.checkoutUrl)">
              ðŸ’³ Proceed to Payment
            </a> -->

            <a href="#" class="checkout-link" (click)="goToCheckout(msg?.button?.checkoutUrl)">
              <span class="hand">ðŸ‘‰</span>
              <span class="text">Click Here</span>
            </a> To Payment
          </div>


          <!-- <div class="text-center mt-3" >
            <button class="btn btn-primary" (click)="goToCheckout(msg?.button?.checkoutUrl)">
              ðŸ’³ Proceed to Checkout
            </button>
          </div> -->
          
        </div>


        
      <div *ngIf="isLoading" class="agent loading">
        <div class="message-text">
          <span class="dot"></span>
          <span class="dot"></span>
          <span class="dot"></span>
        </div>
      </div>
      </div>
    
      <div class="fixedFooter">
        <div class="chat-input">
            <input
              [(ngModel)]="userInput"
              placeholder="Ask a question"
              (keyup.enter)="sendMessage()"
            />
            <button (click)="sendMessage()">âž¤</button>

        </div>
        <div class="footerDiv">
          <footer class="chat-footer">
            Verified. Powered by OpenAI - ChatGPT-5
          </footer>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="showCheckoutIframe" class="iframe-wrapper">
  <iframe
    id="checkoutFrame"
    [src]="safeCheckoutUrl"
    width="100%"
    height="650"
    frameborder="0"
    (load)="onIframeLoad()"
  ></iframe>
</div>


<!-- <ion-footer class="ion-margin-bottom">
  <div class="chat-input">
      <input
        [(ngModel)]="userInput"
        placeholder="Ask a question"
        (keyup.enter)="sendMessage()"
      />
      <button (click)="sendMessage()">âž¤</button>
  </div>
</ion-footer> -->


  <!-- <div class="chat-wrapper">
    <header class="chat-header">
      <h1>wellmedr.</h1>
      <button class="start-btn" (click)="toggleChat()">Get Started</button>
    </header>
  
    <div class="chat-container" *ngIf="isChatOpen">
      <div class="messages">
        <div class="message bot">
          <div class="message-bubble intro">
            Before we begin, I need to verify:
            <ol>
              <li>You're at least 18 years old</li>
              <li>You reside in the United States</li>
              <li>You understand I'm an AI assistant, and all final decisions are made by our medical team</li>
            </ol>
          </div>
        </div>
  
        <div *ngFor="let msg of chatMessages" class="message" [ngClass]="msg.sender">
          <div class="message-bubble">
            <div class="message-meta">
              <strong *ngIf="msg.sender === 'bot'">Clara</strong>
              <span class="timestamp">{{ msg.time }}</span>
            </div>
            <div class="message-text">{{ msg.text }}</div>
          </div>
        </div>
  
        <div *ngIf="isLoading" class="message bot loading">
          <div class="message-bubble typing">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          </div>
        </div>
      </div>
  
      <div class="chat-input">
        <input
          [(ngModel)]="userInput"
          placeholder="Ask a question or share your symptoms"
          (keyup.enter)="sendMessage()"
        />
        <button (click)="sendMessage()">âž¤</button>
      </div>
  
      <footer class="chat-footer">
        Verified by licensed healthcare experts. Powered by OpenAI - ChatGPT-5
      </footer>
    </div>
  </div> -->
  

  
  
  